---
title: C开发环境 适用于VS CODE 编辑器
tags: [小董同学]
categories : [董晨乐, 小董同学]
---

# [C开发环境 适用于VS CODE 编辑器](https://zhuanlan.zhihu.com/p/77074009)

![](https://gitee.com/xxgn/tuchuang/raw/master/img/20200701123019.png)

> 写在前面。本文是**小白启蒙文**，但并不能保证每词每句都极度通俗，仍然**有些专业概念因限于篇幅不能详解**。
>
> 细节在编程这项活计中极具影响力，小白因背景知识薄弱而经常踩坑实属难免，但**错误也是学习的重要途经**，学会从错误中反省与学习是非常优秀的品质，与诸君共勉。

------------

所需文件：https://xxgn.lanzous.com/ijSNAe79mmj（速度很快不需要科学上网）

### 1、安装MinGW-w64编译器套件

要编写C/C++这样的静态语言程序，**必备工具**是一套可用的**编译器**。

> 编译器：它是能**将你的源代码翻译成计算机可直接执行的程序文件**（Windows上即.exe文件）的**程序**。高级程序语言的一大特点是代码具有跨平台性，但不同的硬件和操作系统底层可直接执行的指令显然各不相同，这就决定了我们需要不同的编译器。

本文提到的**MinGW-w64**是一个著名项目为**Windows 64位**平台提供的一套编译器，它也**受到了微软官方文档的推荐**，相关文件托管在SourceForge的网站上，下载地址为https://sourceforge.net/projects/mingw-w64/files/

> 至于Linux和Mac，这里限于篇幅不可能详解，但它们安装编译器都可以直接利用命令行中的包管理器完成，可自行百度“Linux 安装gcc”“Mac 安装clang”。

![](https://gitee.com/xxgn/tuchuang/raw/master/img/20200701123320.png)

下载下来是个几十MB的压缩文件，后缀名为".7z"，需要支持该格式的压缩软件进行解压。

![](https://gitee.com/xxgn/tuchuang/raw/master/img/20200701123445.png)

打开bin文件夹你可以看到很多应用程序，其中就有**gcc**、**g++**等著名的编译器。

![](https://gitee.com/xxgn/tuchuang/raw/master/img/20200701123506.png)

### 2、环境变量添加

**为使外部程序或用户（也就是你）能访问到这些编译器**，需要**把它们所在的目录**（我这里就是`C:\mingw64\bin`，可在上图中点击地址栏进行复制）**添加到环境变量Path中**。按快捷键【Windows徽标】+【S】打开Win10搜索框，输入“环境变量”，在弹出的两个匹配结果中，选择“编辑**账户**的环境变量”（两个匹配项很相似别点错了！之所以选它是防止你误改系统变量损害系统）。

![](https://gitee.com/xxgn/tuchuang/raw/master/img/20200701123557.png)

点击上面的用户变量Path，选择“编辑”，或者直接双击（不要去动下面的系统变量！）

![](https://gitee.com/xxgn/tuchuang/raw/master/img/20200701123613.png)

然后**点击下方空白处**，把刚才那堆应用程序所在的目录（我的是`C:\mingw64\bin\`）添加进去（建议添加在下面，**不要覆盖或修改已有内容**，然后选中它将其上移至顶），**注意结尾是bin，别输掉了**；或者选择“浏览”找到bin文件夹，然后一路确定退出。

![](https://gitee.com/xxgn/tuchuang/raw/master/img/20200701123621.png)

### 3、验证操作

最后为了验证之前操作是否正确，我们需要实际访问一下那些编译器。还是在搜索框中，输入“cmd”，启动“命令提示符”，在命令窗口中输入以下命令并回车

```powershell
gcc --version
```

如果结果如图所示，你的编译器就安装成功了。如果失败，请**回头检查你添加的路径是否生效且与实际相符**；或者请卸载你参考其他教程安装的老式MinGW编译器并清除其添加在Path中的路径。

![](https://gitee.com/xxgn/tuchuang/raw/master/img/20200701123724.png)

### 4、Vs Code 配置

> 文本编辑器是写代码的**辅助工具**，它原则上不是必需品，也不为特定编程语言服务。原则上只要是能编写**纯文本文件**的软件（最简单如Windows记事本），都可以编写**任何语言**的代码。但考虑到实际的编程体验，众多专用的编辑器被开发出来，以提供**代码高亮**（根据特定语言的语法给代码染色，便于阅读）、**语法错误检查**（在编译前提示错字漏字、不合规的语句等错误）、**断点调试**、**多文件的管理**等辅助功能。

注意VS Code跟VS (Visual Studio)只是同属一家、名称相近，但不是一类软件别搞错了。

这里要区分集成开发环境和开发环境

![](https://gitee.com/xxgn/tuchuang/raw/master/img/20200701123843.png)

修改完环境变量、安装或更新完插件后，务必**重启VS Code**。这类属于编辑器环境的东西，大都需重启软件才能生效。

## 配置C/C++的简单环境（重启VS Code后进行！）

这里实际上就是VS Code的具体用法，原则上并无固定章法，但几个基本点有必要提及一下：

1. 脑子里要有**源代码文件**这个概念。写程序不是说就在框框里写一堆代码然后就能跑了！代码都要**写成文件保存起来（到硬盘里）**，然后才有后续的工作；
2. VS Code是支持多语言的编辑器，并不只为C/C++服务，所以还要**确保把代码文件的后缀名写对**，C语言的后缀名是`.c`，C++的是`.cpp`。这是VS Code区分你代码类型的标志；
3. 上面安装的"C/C++"插件提供了对这两门语言的基本支持。C跟C++是**两门不同的语言**，请**向你的老师问清楚学的是哪一门**。无论是在.c文件里敲C++代码，还是在.cpp文件里敲C代码，都是自掘天坑的行为。
4. 编写C/C++程序有两个基本步骤，一是把代码文件变成程序文件，这叫**编译**或**生成**，是调用最开始安装的编译器做的事；二才是把刚刚生成的程序跑起来，这叫**执行**，是操作系统做的事；
5. 这两个基本步骤，一般都是在**命令行**的环境下进行，输入输出也是在这里面。VS Code的优势之一，就是把系统的命令行集成进了软件内部，名唤“**终端**”，从而不必再开新窗口。

进入正题，在VS Code中编写C/C++程序，**不要直接新建个代码文件就开始写**，应该先选择左侧“资源管理器”（两页纸的图标）后按下图操作，

![](https://gitee.com/xxgn/tuchuang/raw/master/img/20200701123956.png)

或者选择菜单项【文件】→【打开文件夹…】，来**打开一个工作文件夹**，这样做的好处包括

- **VS Code中打开的一个文件夹下可以包含你一个项目或一段时期内的各种文件**，便于我们分门别类、有序地组织代码；
- **这个文件夹内可以保存独立的配置**（自动创建子目录`.vscode`保存配置文件，能随工作文件夹一起移动），仅在这个区域内生效而不修改用户个人的全局配置，也不会与其他文件夹的配置相冲突。对于"C/C++"插件这是必需的；
- **VS Code的集成终端在打开的文件夹内自动以该文件夹为启动目录**，这样在里面编译和执行程序时可以方便地使用**相对路径**。

> **路径**是对计算机中文件和文件夹的指示，是编译和执行程序的**必备基础知识**，如有疑问请参阅以下[扫盲贴，](https://zhuanlan.zhihu.com/p/85455028)

找到一个你觉得合适的**文件夹**打开后，你的侧边栏会变成这样

> 注意！请务必确定选择的是“打开文件夹”而非“打开工作区”，工作区具备更强的独立特性，本文的配置方法是不适用的！
> 第一次打开时可能会自动下载"C/C++"插件的额外组件（3个），请务必确认它们下载安装成功。

![](https://gitee.com/xxgn/tuchuang/raw/master/img/20200701124122.png)

### 4、UI配置

接下来，是要利用"C/C++"插件预定义好了的配置，稍作修改以满足我们的需要。按快捷键【Ctrl】【Shift】+【P】，打开命令面板，输入关键词"C/C++"，在弹出的诸命令中选择**编辑配置 (UI)**或者**Edit Configurations (UI)**，将弹出"C/C++"给我们的默认配置（JSON那个操作难度较大，有兴趣的可自行研究）。

![](https://gitee.com/xxgn/tuchuang/raw/master/img/20200701124154.png)

诸配置中最重要的是**编译器路径**和**IntelliSense模式**这两项，两者在右侧都有下拉三角。如果前面你正确配置了环境变量，路径的待选项中就会包含几个正确的编译器路径，**编写C程序请选择gcc.exe，C++则选择g++.exe**；模式选择**gcc-x64**。

> 配置完成后你可以看到一个`c_cpp_properties.json`文件被自动保存在了`.vscode`子目录中，它只在你这个工作文件夹中生效。如果你使用一个新的工作文件夹，就重新配置一下。



![](https://gitee.com/xxgn/tuchuang/raw/master/img/20200701124212.png)

> 注意`.vscode`是你工作文件夹的子目录，下次打开时注意打开的是上一级工作文件夹（比如我上面的MYCLANG，别开到`.vscode`里面去了！

至此配置工作已基本完成

### 5、编译测试（建议重启PC）

## 编写"Hello World"程序

到工作文件夹中添加一个源代码文件，命名为hello**.c**（或者任意你喜欢的名字，但注意后缀名.c别忘了打上），

> 我这里的示例是C语言的，要试用C++的请注意后缀名为.cpp，并求教你的老师或自行编写相应代码。

![](https://gitee.com/xxgn/tuchuang/raw/master/img/20200701124350.png)

输完你的代码后，按快捷键【Ctrl】+【S】

### **保**存、

### 保存、

### 保存！

保存后按快捷键【Ctrl】+【`】（主键盘区左上角Esc键下面那个）即可打开嵌入式终端（命令行环境），**编译代码的命令**为（如果是C++则将gcc替换为g++）

```text
gcc˽-o˽目标文件路径˽源代码文件路径
```

我用符号`˽`标记了空格，“目标文件”即你要生成的程序文件，起名和加不加.exe都随意（因为它会自动加）。在我们这，由于已经在打开的文件夹里，可以使用相对路径，

```text
gcc -o .\myhello .\hello.c
```

回车，就能编译你刚刚的hello.c文件，如果成功，则在相同目录下生成一个myhello.exe程序文件。**执行程序**的命令为

```text
程序文件路径
```

是的形式上就是这样，只是路径可以是绝对或相对的，当然相对的一般更方便，这里要执行上面的程序就是

```text
.\myhello.exe
```

注意VS Code的默认终端实际上是**PowerShell，需要使用`.\`显式地指明它是当前目录下的可执行文件**，如果省略它出于安全原因会拒绝你程序的执行。